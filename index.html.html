<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Despesas | Uber/99</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --uber-primary: #09091A;
            --uber-secondary: #1FBAD6;
            --uber-accent: #C0C0C8;
            --99-primary: #F26822;
            --99-secondary: #F9A825;
            --light-bg: #F8F9FA;
            --dark-text: #333333;
            --light-text: #FFFFFF;
            --success-color: #4CAF50;
            --danger-color: #F44336;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 10px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--uber-primary), var(--99-primary));
            color: var(--light-text);
            padding: 25px 0;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--uber-secondary);
        }
        
        h1 {
            font-size: 2rem;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--uber-primary);
            border-bottom: 2px solid var(--uber-secondary);
            padding-bottom: 10px;
        }
        
        .card-title i {
            color: var(--99-primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--uber-primary);
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--uber-accent);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--uber-secondary);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .radio-option input {
            width: auto;
        }
        
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background-color: var(--99-primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #e05a1b;
        }
        
        .btn-secondary {
            background-color: var(--uber-secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #19a5c0;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            margin-bottom: 25px;
        }
        
        .filters .form-group {
            margin-bottom: 0;
            flex: 1;
        }
        
        .btn-small {
            padding: 10px 15px;
            font-size: 0.9rem;
        }
        
        .transactions-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
        }
        
        .transaction-item:hover {
            background-color: #f9f9f9;
        }
        
        .transaction-info {
            flex: 1;
        }
        
        .transaction-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .transaction-category {
            font-size: 0.85rem;
            color: #666;
            background-color: #f0f0f0;
            padding: 3px 8px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .transaction-amount {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .income {
            color: var(--success-color);
        }
        
        .expense {
            color: var(--danger-color);
        }
        
        .transaction-date {
            font-size: 0.85rem;
            color: #888;
            margin-top: 5px;
        }
        
        .delete-btn {
            background: none;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.2s;
            margin-left: 15px;
        }
        
        .delete-btn:hover {
            color: var(--danger-color);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-item {
            text-align: center;
            padding: 20px;
            border-radius: var(--border-radius);
            color: white;
        }
        
        .total-income {
            background: linear-gradient(135deg, var(--success-color), #2E7D32);
        }
        
        .total-expense {
            background: linear-gradient(135deg, var(--danger-color), #C62828);
        }
        
        .balance {
            background: linear-gradient(135deg, var(--uber-secondary), #0D8AA5);
            grid-column: span 2;
        }
        
        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 10px;
        }
        
        .category-summary {
            margin-top: 25px;
        }
        
        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        .category-name {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #888;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-title {
            margin-bottom: 20px;
            color: var(--uber-primary);
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 600;
            box-shadow: var(--card-shadow);
            z-index: 1001;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification.success {
            background-color: var(--success-color);
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .month-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .month-btn {
            background-color: var(--uber-accent);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--uber-primary);
            font-weight: bold;
        }
        
        .current-month {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--uber-primary);
            flex: 1;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-wallet"></i>
                    <div>
                        <h1>Controle de Despesas</h1>
                        <div class="subtitle">Gerencie seus gastos e recebimentos com estilo Uber/99</div>
                    </div>
                </div>
                <div class="current-balance">
                    <div style="font-size: 0.9rem; opacity: 0.9;">Saldo Atual</div>
                    <div id="currentBalance" style="font-size: 1.8rem; font-weight: 700;">R$ 0,00</div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="main-content">
            <div class="left-column">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-plus-circle"></i> Nova Transação</h2>
                    <form id="transactionForm">
                        <div class="form-group">
                            <label for="name">Nome</label>
                            <input type="text" id="name" placeholder="Ex: Salário, Supermercado, Uber..." required>
                        </div>
                        
                        <div class="form-group">
                            <label for="amount">Valor (R$)</label>
                            <input type="number" id="amount" step="0.01" min="0" placeholder="0,00" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="category">Categoria</label>
                            <select id="category" required>
                                <option value="">Selecione uma categoria</option>
                                <option value="Alimentação">Alimentação</option>
                                <option value="Transporte">Transporte</option>
                                <option value="Moradia">Moradia</option>
                                <option value="Lazer">Lazer</option>
                                <option value="Saúde">Saúde</option>
                                <option value="Educação">Educação</option>
                                <option value="Salário">Salário</option>
                                <option value="Freelance">Freelance</option>
                                <option value="Outros">Outros</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="date">Data</label>
                            <input type="date" id="date" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Tipo</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="income" name="type" value="income" checked>
                                    <label for="income">Receita</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="expense" name="type" value="expense">
                                    <label for="expense">Despesa</label>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Transação
                        </button>
                    </form>
                </div>
                
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-chart-pie"></i> Resumo por Categoria</h2>
                    <div id="categorySummary">
                        <div class="empty-state">
                            <i class="fas fa-chart-pie"></i>
                            <p>Nenhuma transação cadastrada ainda.</p>
                            <p>Adicione transações para ver o resumo por categoria.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="card">
                    <div class="filters">
                        <div class="form-group">
                            <label for="filterMonth">Filtrar por mês</label>
                            <input type="month" id="filterMonth">
                        </div>
                        <button id="clearFilter" class="btn btn-secondary btn-small">
                            <i class="fas fa-times"></i> Limpar
                        </button>
                    </div>
                    
                    <div class="month-selector">
                        <button id="prevMonth" class="month-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="currentMonthDisplay" class="current-month">Julho 2023</div>
                        <button id="nextMonth" class="month-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <h2 class="card-title"><i class="fas fa-list"></i> Transações</h2>
                    <div class="transactions-list" id="transactionsList">
                        <div class="empty-state">
                            <i class="fas fa-receipt"></i>
                            <p>Nenhuma transação cadastrada ainda.</p>
                            <p>Adicione sua primeira transação usando o formulário ao lado.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-chart-bar"></i> Resumo do Mês</h2>
                    <div class="summary-grid">
                        <div class="summary-item total-income">
                            <div>Receitas</div>
                            <div id="totalIncome" class="summary-value">R$ 0,00</div>
                        </div>
                        <div class="summary-item total-expense">
                            <div>Despesas</div>
                            <div id="totalExpense" class="summary-value">R$ 0,00</div>
                        </div>
                        <div class="summary-item balance">
                            <div>Saldo do Mês</div>
                            <div id="monthBalance" class="summary-value">R$ 0,00</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de confirmação de exclusão -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">Confirmar Exclusão</h3>
            <p>Tem certeza que deseja excluir esta transação? Esta ação não pode ser desfeita.</p>
            <div class="modal-buttons">
                <button id="cancelDelete" class="btn btn-secondary">Cancelar</button>
                <button id="confirmDelete" class="btn" style="background-color: var(--danger-color); color: white;">Excluir</button>
            </div>
        </div>
    </div>
    
    <!-- Notificação -->
    <div id="notification" class="notification">
        <span id="notificationText">Transação salva com sucesso!</span>
    </div>
    
    <footer>
        <div class="container">
            <p>Aplicativo de Controle de Despesas - Dados armazenados localmente no navegador</p>
            <p>Cores inspiradas na Uber e 99 | Desenvolvido em HTML, CSS e JavaScript</p>
        </div>
    </footer>
    
    <script>
        // Banco de dados local (localStorage)
        const STORAGE_KEY = 'expense_tracker_data';
        let transactions = [];
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let transactionToDelete = null;
        
        // Cores para categorias
        const categoryColors = {
            'Alimentação': '#FF6B6B',
            'Transporte': '#4ECDC4',
            'Moradia': '#FFD166',
            'Lazer': '#06D6A0',
            'Saúde': '#118AB2',
            'Educação': '#073B4C',
            'Salário': '#7209B7',
            'Freelance': '#F8961E',
            'Outros': '#6A994E'
        };
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            loadTransactions();
            initDate();
            renderTransactions();
            updateSummary();
            updateCategorySummary();
            updateCurrentBalance();
            
            // Configurar evento do formulário
            document.getElementById('transactionForm').addEventListener('submit', saveTransaction);
            
            // Configurar filtro de mês
            document.getElementById('filterMonth').addEventListener('change', filterByMonth);
            document.getElementById('clearFilter').addEventListener('click', clearFilter);
            
            // Configurar navegação de mês
            document.getElementById('prevMonth').addEventListener('click', goToPrevMonth);
            document.getElementById('nextMonth').addEventListener('click', goToNextMonth);
            
            // Configurar modal de exclusão
            document.getElementById('cancelDelete').addEventListener('click', closeDeleteModal);
            document.getElementById('confirmDelete').addEventListener('click', deleteTransaction);
            
            // Fechar modal ao clicar fora
            document.getElementById('deleteModal').addEventListener('click', function(e) {
                if (e.target === this) closeDeleteModal();
            });
        });
        
        // Carregar transações do localStorage
        function loadTransactions() {
            const data = localStorage.getItem(STORAGE_KEY);
            if (data) {
                transactions = JSON.parse(data);
            }
        }
        
        // Salvar transações no localStorage
        function saveTransactions() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(transactions));
        }
        
        // Inicializar data com hoje
        function initDate() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('date').value = formattedDate;
            
            // Inicializar filtro de mês com mês atual
            const currentMonthStr = today.getFullYear() + '-' + String(today.getMonth() + 1).padStart(2, '0');
            document.getElementById('filterMonth').value = currentMonthStr;
            
            updateMonthDisplay();
        }
        
        // Salvar nova transação
        function saveTransaction(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const date = document.getElementById('date').value;
            const type = document.querySelector('input[name="type"]:checked').value;
            
            if (!name || isNaN(amount) || amount <= 0 || !category || !date) {
                showNotification('Preencha todos os campos corretamente!', 'error');
                return;
            }
            
            const newTransaction = {
                id: Date.now(),
                name,
                amount,
                category,
                date,
                type
            };
            
            transactions.push(newTransaction);
            saveTransactions();
            
            // Limpar formulário
            document.getElementById('transactionForm').reset();
            document.getElementById('date').value = new Date().toISOString().split('T')[0];
            document.getElementById('income').checked = true;
            
            // Atualizar interface
            renderTransactions();
            updateSummary();
            updateCategorySummary();
            updateCurrentBalance();
            
            showNotification('Transação salva com sucesso!', 'success');
        }
        
        // Renderizar lista de transações
        function renderTransactions() {
            const transactionsList = document.getElementById('transactionsList');
            const filteredTransactions = getFilteredTransactions();
            
            if (filteredTransactions.length === 0) {
                transactionsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-receipt"></i>
                        <p>Nenhuma transação encontrada para este período.</p>
                        <p>Adicione uma transação ou ajuste os filtros.</p>
                    </div>
                `;
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            filteredTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let html = '';
            
            filteredTransactions.forEach(transaction => {
                const dateObj = new Date(transaction.date);
                const formattedDate = dateObj.toLocaleDateString('pt-BR');
                
                html += `
                    <div class="transaction-item" data-id="${transaction.id}">
                        <div class="transaction-info">
                            <div class="transaction-name">${transaction.name}</div>
                            <div class="transaction-category">${transaction.category}</div>
                            <div class="transaction-date">${formattedDate}</div>
                        </div>
                        <div class="transaction-amount ${transaction.type}">
                            ${transaction.type === 'income' ? '+' : '-'} R$ ${transaction.amount.toFixed(2)}
                        </div>
                        <button class="delete-btn" onclick="openDeleteModal(${transaction.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            });
            
            transactionsList.innerHTML = html;
        }
        
        // Obter transações filtradas por mês
        function getFilteredTransactions() {
            const filterMonth = document.getElementById('filterMonth').value;
            
            if (!filterMonth) {
                return transactions;
            }
            
            const [year, month] = filterMonth.split('-').map(Number);
            
            return transactions.filter(transaction => {
                const transactionDate = new Date(transaction.date);
                return transactionDate.getFullYear() === year && 
                       transactionDate.getMonth() + 1 === month;
            });
        }
        
        // Filtrar por mês
        function filterByMonth() {
            const filterMonth = document.getElementById('filterMonth').value;
            
            if (filterMonth) {
                const [year, month] = filterMonth.split('-').map(Number);
                currentMonth = month - 1;
                currentYear = year;
                updateMonthDisplay();
            }
            
            renderTransactions();
            updateSummary();
            updateCategorySummary();
        }
        
        // Limpar filtro
        function clearFilter() {
            document.getElementById('filterMonth').value = '';
            const today = new Date();
            currentMonth = today.getMonth();
            currentYear = today.getFullYear();
            updateMonthDisplay();
            renderTransactions();
            updateSummary();
            updateCategorySummary();
        }
        
        // Navegar para mês anterior
        function goToPrevMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            
            updateMonthFilter();
            updateMonthDisplay();
            renderTransactions();
            updateSummary();
            updateCategorySummary();
        }
        
        // Navegar para próximo mês
        function goToNextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            
            updateMonthFilter();
            updateMonthDisplay();
            renderTransactions();
            updateSummary();
            updateCategorySummary();
        }
        
        // Atualizar filtro de mês com base no mês atual
        function updateMonthFilter() {
            const monthStr = String(currentMonth + 1).padStart(2, '0');
            document.getElementById('filterMonth').value = `${currentYear}-${monthStr}`;
        }
        
        // Atualizar exibição do mês atual
        function updateMonthDisplay() {
            const monthNames = [
                'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
            ];
            
            document.getElementById('currentMonthDisplay').textContent = 
                `${monthNames[currentMonth]} ${currentYear}`;
        }
        
        // Atualizar resumo do mês
        function updateSummary() {
            const filteredTransactions = getFilteredTransactions();
            
            let totalIncome = 0;
            let totalExpense = 0;
            
            filteredTransactions.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalIncome += transaction.amount;
                } else {
                    totalExpense += transaction.amount;
                }
            });
            
            const balance = totalIncome - totalExpense;
            
            document.getElementById('totalIncome').textContent = `R$ ${totalIncome.toFixed(2)}`;
            document.getElementById('totalExpense').textContent = `R$ ${totalExpense.toFixed(2)}`;
            document.getElementById('monthBalance').textContent = `R$ ${balance.toFixed(2)}`;
            
            // Destacar saldo negativo
            const monthBalanceElement = document.getElementById('monthBalance');
            if (balance < 0) {
                monthBalanceElement.style.color = '#FF6B6B';
            } else {
                monthBalanceElement.style.color = 'white';
            }
        }
        
        // Atualizar saldo atual (geral)
        function updateCurrentBalance() {
            let totalIncome = 0;
            let totalExpense = 0;
            
            transactions.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalIncome += transaction.amount;
                } else {
                    totalExpense += transaction.amount;
                }
            });
            
            const balance = totalIncome - totalExpense;
            document.getElementById('currentBalance').textContent = `R$ ${balance.toFixed(2)}`;
            
            // Destacar saldo negativo
            if (balance < 0) {
                document.getElementById('currentBalance').style.color = '#FF6B6B';
            } else {
                document.getElementById('currentBalance').style.color = 'white';
            }
        }
        
        // Atualizar resumo por categoria
        function updateCategorySummary() {
            const categorySummary = document.getElementById('categorySummary');
            const filteredTransactions = getFilteredTransactions();
            
            // Agrupar por categoria
            const categoryTotals = {};
            
            filteredTransactions.forEach(transaction => {
                if (!categoryTotals[transaction.category]) {
                    categoryTotals[transaction.category] = {
                        income: 0,
                        expense: 0
                    };
                }
                
                if (transaction.type === 'income') {
                    categoryTotals[transaction.category].income += transaction.amount;
                } else {
                    categoryTotals[transaction.category].expense += transaction.amount;
                }
            });
            
            if (Object.keys(categoryTotals).length === 0) {
                categorySummary.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-chart-pie"></i>
                        <p>Nenhuma transação cadastrada para este período.</p>
                        <p>Adicione transações para ver o resumo por categoria.</p>
                    </div>
                `;
                return;
            }
            
            // Converter para array e ordenar pelo total (receitas - despesas)
            const categoriesArray = Object.keys(categoryTotals).map(category => {
                const total = categoryTotals[category].income - categoryTotals[category].expense;
                return {
                    name: category,
                    income: categoryTotals[category].income,
                    expense: categoryTotals[category].expense,
                    total: total
                };
            });
            
            // Ordenar pelo total (maior primeiro)
            categoriesArray.sort((a, b) => Math.abs(b.total) - Math.abs(a.total));
            
            let html = '<div class="category-summary">';
            
            categoriesArray.forEach(category => {
                const color = categoryColors[category.name] || '#6A994E';
                
                html += `
                    <div class="category-item">
                        <div class="category-name">
                            <div class="category-color" style="background-color: ${color};"></div>
                            <span>${category.name}</span>
                        </div>
                        <div>
                            <div style="font-weight: 600; color: ${category.total >= 0 ? 'var(--success-color)' : 'var(--danger-color)'}">
                                R$ ${category.total.toFixed(2)}
                            </div>
                            <div style="font-size: 0.8rem; color: #666;">
                                Receitas: R$ ${category.income.toFixed(2)} | Despesas: R$ ${category.expense.toFixed(2)}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            categorySummary.innerHTML = html;
        }
        
        // Abrir modal de exclusão
        function openDeleteModal(id) {
            transactionToDelete = id;
            document.getElementById('deleteModal').style.display = 'flex';
        }
        
        // Fechar modal de exclusão
        function closeDeleteModal() {
            transactionToDelete = null;
            document.getElementById('deleteModal').style.display = 'none';
        }
        
        // Excluir transação
        function deleteTransaction() {
            if (transactionToDelete) {
                const index = transactions.findIndex(t => t.id === transactionToDelete);
                if (index !== -1) {
                    transactions.splice(index, 1);
                    saveTransactions();
                    
                    // Atualizar interface
                    renderTransactions();
                    updateSummary();
                    updateCategorySummary();
                    updateCurrentBalance();
                    
                    showNotification('Transação excluída com sucesso!', 'success');
                }
                
                closeDeleteModal();
            }
        }
        
        // Mostrar notificação
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            
            // Mostrar notificação
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Ocultar após 3 segundos
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Adicionar alguns dados de exemplo (apenas para demonstração)
        function addSampleData() {
            // Verificar se já existem transações
            if (transactions.length === 0) {
                const sampleTransactions = [
                    {
                        id: 1,
                        name: "Salário",
                        amount: 3500.00,
                        category: "Salário",
                        date: "2023-07-05",
                        type: "income"
                    },
                    {
                        id: 2,
                        name: "Supermercado",
                        amount: 450.50,
                        category: "Alimentação",
                        date: "2023-07-10",
                        type: "expense"
                    },
                    {
                        id: 3,
                        name: "Uber",
                        amount: 25.80,
                        category: "Transporte",
                        date: "2023-07-12",
                        type: "expense"
                    },
                    {
                        id: 4,
                        name: "Freelance",
                        amount: 800.00,
                        category: "Freelance",
                        date: "2023-07-15",
                        type: "income"
                    },
                    {
                        id: 5,
                        name: "Aluguel",
                        amount: 1200.00,
                        category: "Moradia",
                        date: "2023-07-01",
                        type: "expense"
                    },
                    {
                        id: 6,
                        name: "Cinema",
                        amount: 60.00,
                        category: "Lazer",
                        date: "2023-07-18",
                        type: "expense"
                    }
                ];
                
                transactions = sampleTransactions;
                saveTransactions();
                
                // Atualizar interface
                renderTransactions();
                updateSummary();
                updateCategorySummary();
                updateCurrentBalance();
                
                showNotification('Dados de exemplo carregados!', 'success');
            }
        }
        
        // Descomente a linha abaixo para adicionar dados de exemplo ao carregar a página
        // setTimeout(addSampleData, 500);
    </script>
</body>
</html>